iling to pay federal taxes. The plea deal was for a sentence of diversion. A gun charge was dropped. Hunter Biden is getting away with a slap on the wrist when growing evidence uncovered by the House Oversight Committee reveals the Bidens engaged in a pattern of corruption, influence peddling, and possibly bribery.', 'event_description_short': 'In the midst of these wild accusations, Hunter Biden was indicted by a grand jury prosecuted by the DOJ. He agreed to plead guilty to two misdemeanor counts of willfully failing to pay federal taxes. ', 'created_date': '07/14/2023', 'modified_date': '07/20/2023', 'publish_date': '07/13/2023', 'source_name': 'NewsBank Article - 192C4DDBDFF9B6F8', 'source_type': 'Media', 'source_publication': 'State Journal, The (Frankfort, KY)', 'source_publisher': 'State Journal, The (Frankfort, KY)', 'source_key': '192C4DDBDFF9B6F8'}, {'event_category_code': 'PRJ', 'event_sub_category_code': 'ACQ', 'event_date': '2024-12-02', 'event_description': 'U.S. President Joe Biden said on Sunday he had pardoned his son, Hunter Biden, who pleaded guilty to tax violations and was convicted on firearms-related charges. The grant of clemency said Biden had granted "a full and unconditional" pardon to Hunter Biden for any offenses in a window from Jan. 1, 2014, to Dec. 1, 2024. Hunter Biden faced sentencing for the false statements and gun convictions this month. In September he pleaded guilty to federal charges of failing to pay $1.4 million in taxes while spending lavishly on drugs, sex workers and luxury items. He was scheduled for sentencing in that case on Dec. 16.', 'event_description_short': 'U.S. President Joe Biden said on Sunday he had pardoned his son, Hunter Biden, who pleaded guilty to tax violations and was convicted on firearms-related charges. The grant of clemency said Biden had ', 'created_date': '12/02/2024', 'modified_date': '12/02/2024', 'publish_date': '12/02/2024', 'source_name': 'Acquire Media Article - 8e2261763f904138923714a5c8e91dda95e96573', 'source_type': 'Media', 'source_publication': 'Hiru News (Sri Lanka)', 'source_publisher': 'HT Media Ltd.', 'source_key': '8e2261763f904138923714a5c8e91dda95e96573'}, {'event_category_code': 'TAX', 'event_sub_category_code': 'CVT', 'event_date': '2025-01-17', 'event_description': 'Hunter Biden issuing a full and unconditional pardon over federal gun and tax crimes.', 'event_description_short': 'Hunter Biden issuing a full and unconditional pardon over federal gun and tax crimes.', 'created_date': '01/17/2025', 'modified_date': '01/22/2025', 'publish_date': '01/17/2025', 'source_name': 'Acquire Media Article - 77abd78e4582f177a1e7dc594d7a9a0724b58e4e', 'source_type': 'Media', 'source_publication': 'Idaho Capital Sun', 'source_publisher': 'ACI Information Group', 'source_key': '77abd78e4582f177a1e7dc594d7a9a0724b58e4e'}, {'event_category_code': 'IGN', 'event_sub_category_code': 'CVT', 'event_date': '2025-01-17', 'event_description': 'Hunter Biden issuing a full and unconditional pardon over federal gun and tax crimes.', 'event_description_short': 'Hunter Biden issuing a full and unconditional pardon over federal gun and tax crimes.', 'created_date': '01/17/2025', 'modified_date': '01/22/2025', 'publish_date': '01/17/2025', 'source_name': 'Acquire Media Article - 77abd78e4582f177a1e7dc594d7a9a0724b58e4e', 'source_type': 'Media', 'source_publication': 'Idaho Capital Sun', 'source_publisher': 'ACI Information Group', 'source_key': '77abd78e4582f177a1e7dc594d7a9a0724b58e4e'}, {'event_category_code': 'PRJ', 'event_sub_category_code': 'TRL', 'event_date': '2024-06-05', 'event_description': 'Chinese Television System listed an article on June 6, 2024, re: Hunter Biden stood on trial for illegally possessing weapons and falsely reporting the purchase of a gun. Reportedly, Hunter lied to a federally licensed gun dealer, falsely claimed he was not a drug addict while purchasing a gun, and illegally possessed a gun for 11 days.', 'event_description_short': 'Chinese Television System listed an article on June 6, 2024, re: Hunter Biden stood on trial for illegally possessing weapons and falsely reporting the purchase of a gun. Reportedly, Hunter lied to a ', 'created_date': '08/08/2024', 'modified_date': '08/12/2025', 'publish_date': '08/12/2025', 'source_name': 'Global Online Media (Chinese Media Backfill)', 'source_type': 'Web', 'source_key': 'special_media_chinese_backfill'}, {'event_category_code': 'PRJ', 'event_sub_category_code': 'TRL', 'event_date': '2024-06-04', 'event_description': 'World Journal listed an article on June 5, 2024, re: Hunter Biden stood on trial for illegally possessing weapons and falsely reporting the purchase of a gun. Reportedly, Hunter lied to a federally licensed gun dealer, falsely claimed he was not a drug addict while purchasing a gun, and illegally possessed a gun for 11 days.', 'event_description_short': 'World Journal listed an article on June 5, 2024, re: Hunter Biden stood on trial for illegally possessing weapons and falsely reporting the purchase of a gun. Reportedly, Hunter lied to a federally li', 'created_date': '08/08/2024', 'modified_date': '08/12/2025', 'publish_date': '08/12/2025', 'source_name': 'Global Online Media (Chinese Media Backfill)', 'source_type': 'Web', 'source_key': 'special_media_chinese_backfill'}], 'latest_event_date': '2025-08-12', 'primary_country': 'UNITED STATES', 'primary_city': None, 'country': 'UNITED STATES', 'addresses': [{'address_country': 'UNITED STATES'}], 'aliases': ['Joe Biden', 'Baiden Hanter', 'Байден Хантер', 'Хантер Байден', 'Robert Hunter Biden', 'Robert H. Biden', 'Hunter Biden Jnr', 'R. Hunter Biden', '杭特‧拜登', '亨特‧拜登', '韓特．拜登'], 'key_aliases': [{'alias_name': 'Joe Biden', 'alias_code_type': 'AKA'}, {'alias_name': 'Baiden Hanter', 'alias_code_type': 'AKA'}, {'alias_name': 'Байден Хантер', 'alias_code_type': 'AKA'}, {'alias_name': 'Хантер Байден', 'alias_code_type': 'LOC'}, {'alias_name': 'Robert Hunter Biden', 'alias_code_type': 'AKA'}, {'alias_name': 'Robert H. Biden', 'alias_code_type': 'AKA'}, {'alias_name': 'Hunter Biden Jnr', 'alias_code_type': 'AKA'}, {'alias_name': 'R. Hunter Biden', 'alias_code_type': 'AKA'}, {'alias_name': '杭特‧拜登', 'alias_code_type': 'AKA'}, {'alias_name': '亨特‧拜登', 'alias_code_type': 'AKA'}, {'alias_name': '韓特．拜登', 'alias_code_type': 'AKA'}], 'alias_count': 11, 'identifications': [], 'relationships': [{'related_entity_id': '145818734', 'related_entity_name': 'Alan Bret Apter', 'type': 'ASSOCIATE', 'direction': 'TO'}, {'related_entity_id': '252678268', 'related_entity_name': 'Joseph Robinette Biden III', 'type': 'BROTHER', 'direction': 'TO'}, {'related_entity_id': '251717798', 'related_entity_name': 'Devon Archer', 'type': 'ASSOCIATE', 'direction': 'TO'}, {'related_entity_id': '255434608', 'related_entity_name': 'National Railroad Passenger Corporation', 'type': 'ASSOCIATE', 'direction': 'TO'}, {'related_entity_id': '254653133', 'related_entity_name': 'Mikola Vladislavovich Elochevsvkii', 'type': 'ASSOCIATE', 'direction': 'TO'}, {'related_entity_id': '255424920', 'related_entity_name': 'Joseph Robinette Biden Junior', 'type': 'SON', 'direction': 'TO'}, {'related_entity_id': '145796258', 'related_entity_name': 'Aleksandr Kvasnevskyi', 'type': 'ASSOCIATE', 'direction': 'FROM'}], 'sources': [], 'date_of_birth': {'date_of_birth_year': '1970', 'date_of_birth_month': '2', 'date_of_birth_day': '4'}, 'source_count': 0, 'relationship_count': 7, 'bvd_id': '', 'source_item_id': '', 'created_date': datetime.date(2025, 8, 12), 'attributes': [], 'date_of_births': [], 'bvd_mapping': [], 'reverse_relationships': []}
INFO:__main__:Displaying entity results as cards
INFO:__main__:Processing 5 results for card display
INFO:__main__:Card view: Displaying 5 entities (showing up to 50)
INFO:__main__:Successfully created 5 entity cards
INFO:hybrid_entity_display:✅ Hybrid entity display created with 5 entities
INFO:__main__:✅ Hybrid entity display created successfully
INFO:hybrid_entity_display:✅ Hybrid entity display created with 5 entities
INFO:__main__:✅ Hybrid entity display created successfully
INFO:hybrid_entity_display:✅ Hybrid entity display created with 5 entities
INFO:__main__:✅ Hybrid entity display created successfully
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Cleaned up expired user instance: b9a6912b23059495
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
^Z
zsh: suspended  python3 main.py
(venv) mukhiyas@Y2GM2Y75K7 gr5-master % lsof -i :8080  
COMMAND   PID     USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
Python  97468 mukhiyas   37u  IPv4 0xbdb03789a7e4156c      0t0  TCP *:http-alt (LISTEN)
(venv) mukhiyas@Y2GM2Y75K7 gr5-master % kill -9 97468
[1]  + killed     python3 main.py                                                                                                             
(venv) mukhiyas@Y2GM2Y75K7 gr5-master % python3 main.py
/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
INFO:optimized_database_queries:✅ Loaded 36 event risk scores from configuration
INFO:optimized_database_queries:✅ Loaded PEP level scores from configuration: {'L1': 55, 'L2': 60, 'L3': 65, 'L4': 70, 'L5': 75, 'L6': 80}
INFO:optimized_database_queries:✅ Loaded PRT rating scores: {'A': 90, 'B': 75, 'C': 60, 'D': 45}
INFO:optimized_database_queries:✅ Loaded 14 priority countries from configuration
INFO:__main__:✅ Optimized database query modules loaded successfully
INFO:__main__:✅ Legacy database integration modules loaded successfully
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.client:Successfully opened session 01f087ee-6a3b-1420-94df-44ecbef8a424
INFO:database_driven_codes:✅ Connected to database for live code extraction
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:database_driven_codes:📋 Loaded 67 event category codes from database
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:database_driven_codes:📊 Loaded usage statistics for 63 codes
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:database_driven_codes:📋 Loaded 36 event sub-category codes
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:database_driven_codes:📋 Loaded 29 entity attribute codes
INFO:database_driven_codes:✅ Successfully loaded all codes from database
INFO:database_driven_codes:📝 No user customizations found - using database defaults
INFO:__main__:✅ Database modules initialized successfully
INFO:__main__:Background cleanup thread started successfully
============================================================
🚀 GRID ENTITY SEARCH - PRODUCTION MODE
============================================================
✅ Full Database Connectivity
✅ Real Entity Search & Analysis
✅ Complete Enterprise Functionality
✅ User Session Isolation (Fixed Caching Issues)
🌐 Access: http://localhost:8080
============================================================
NiceGUI ready to go on http://localhost:8080, http://10.27.164.77:8080, and http://192.168.1.127:8080
INFO:__main__:Created new user session ID: 8e2c33623bbf71f8
INFO:__main__:✅ Optimized DatabaseQueries initialized
INFO:dynamic_config_manager:✅ Loaded configuration from user_config.json
INFO:__main__:Loaded 1 risk scores from dynamic configuration
INFO:__main__:Loaded 1 PEP priorities from dynamic configuration
INFO:__main__:Loaded 2 geographic multipliers from dynamic configuration
INFO:__main__:Settings file not found, using defaults
INFO:__main__:Applying environment variable overrides...
INFO:__main__:Environment variable overrides applied
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.client:Successfully opened session 01f087ee-7d2c-13c9-b226-d2ee8dd12d08
INFO:__main__:Database connection successful (timeout: 30s)
INFO:__main__:✅ Optimized database queries ready for use
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:__main__:✅ Loaded 182 codes from database:
INFO:__main__:   - entity_attribute: 29 codes
INFO:__main__:   - event_category: 67 codes
INFO:__main__:   - event_sub_category: 36 codes
INFO:__main__:   - relationship_direction: 2 codes
INFO:__main__:   - relationship_type: 48 codes
INFO:__main__:   Risk codes: 68 → 68 (+0 from DB)
INFO:__main__:   PEP codes: 19 → 19 (+0 from DB)
INFO:__main__:   Added 1 missing risk codes from debug analysis
INFO:__main__:🔄 Merged database codes with existing dictionaries
INFO:__main__:✅ Database integration initialized successfully
INFO:__main__:Created new app instance for user 8e2c33623bbf71f8
INFO:__main__:Main page accessed by user 8e2c33623bbf71f8
INFO:__main__:Created Entity Browser for client 40c1c28ef9ec
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Displaying 0 entities for client 40c1c28ef9ec
INFO:__main__:Browser 40c1c28ef9ec showing empty state (available data: 0)
INFO:__main__:Final search criteria: ['entity_name', 'risk_score_min', 'risk_score_max'] with logical operator: AND
INFO:__main__:🔍 DEBUG: search_criteria = {'entity_name': 'donald trump', 'risk_score_min': 0, 'risk_score_max': 100}
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:__main__:🔍 DEBUG: Converting search_criteria to optimized params: {'entity_name': 'donald trump', 'risk_score_min': 0, 'risk_score_max': 100}
INFO:__main__:🚀 Using optimized search for 3 parameters
INFO:optimized_database_queries:🔍 Searching individual tables with prefix: individual
INFO:optimized_database_queries:🔍 Name search for: 'donald trump' (length: 12)
INFO:optimized_database_queries:✅ Added individual name filters for: 'donald trump'
INFO:optimized_database_queries:🔍 Query filters count: base=1, performance=0, total=1
INFO:optimized_database_queries:🔍 Query parameters: ['name_exact', 'name_contains', 'name_starts_with', 'name_ends_with']
INFO:optimized_database_queries:🔧 Using config-based events - Critical: 8, High: 10, Medium: 10, Low: 8
INFO:optimized_database_queries:📋 Query built with 1 filters, limit: 5
INFO:__main__:🔌 Executing query with connection: True
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:__main__:Query executed in 2.11s, returned 5 raw results
INFO:__main__:🔍 Query returned columns: ['entity_id', 'risk_id', 'entity_name', 'recordDefinitionType', 'systemId', 'entityDate', 'pep_data', 'critical_events', 'primary_address', 'key_aliases', 'relationships', 'date_of_birth', 'calculated_risk_score']
INFO:__main__:🔍 First row data sample - entity_id: 224452122, has events: True
INFO:optimized_database_queries:🔄 Processing 5 raw results
INFO:optimized_database_queries:✅ Processed 5 results successfully
INFO:__main__:✅ Optimized search returned 5 results
INFO:__main__:Entity 224452122: events_raw=1, bvd_mapping=None
INFO:__main__:Entity 224452122: First event sample: {'event_category_code': 'BRB', 'event_sub_category_code': 'CVT', 'event_date': '2025-01-06', 'event_description': "Donald Trump is trying to get out of his sentencing hearing for the 34 felony counts in his hush-money case. Trump's lawyers argued that the Supreme Court's decision in Trump v. United States required a stay of all trial proceedings, as Trump had been granted presidential immunity for official acts.", 'event_description_short': "Donald Trump is trying to get out of his sentencing hearing for the 34 felony counts in his hush-money case. Trump's lawyers argued that the Supreme Court's decision in Trump v. United States required", 'created_date': '01/07/2025', 'modified_date': '01/27/2025', 'publish_date': '01/06/2025', 'source_name': 'NewsBank Article - 19DF5171F6F2BDF0', 'source_type': 'Media', 'source_publication': 'New Republic, The: Web Edition Articles', 'source_publisher': 'New Republic, The: Web Edition Articles', 'source_key': '19DF5171F6F2BDF0'}
INFO:__main__:✅ Using optimized risk score for entity 224452122: 42
INFO:__main__:✅ Using optimized PEP status for entity 224452122: NOT_PEP
INFO:__main__:Entity 218432707: events_raw=1, bvd_mapping=None
INFO:__main__:Entity 218432707: First event sample: {'event_category_code': 'BRB', 'event_sub_category_code': 'PRB', 'event_date': '2024-11-06', 'event_description': "Donald Trump investigates the falsification of documents to conceal the payment of $ 130,000 to former porn actress ' Stormy Daniels', whom he paid not to talk about an alleged extramarital affair shortly before the 2016 election, the first in which Trump achieved victory.", 'event_description_short': "Donald Trump investigates the falsification of documents to conceal the payment of $ 130,000 to former porn actress ' Stormy Daniels', whom he paid not to talk about an alleged extramarital affair sho", 'created_date': '11/06/2024', 'modified_date': '11/07/2024', 'publish_date': '11/06/2024', 'source_name': 'Acquire Media Article - d91e4b1ec9df35e2b40ace238ef44e7d733fb6e9', 'source_type': 'Media', 'source_publication': 'CE Noticias Financieras (Latin America)', 'source_publisher': 'ContentEngine, LLC', 'source_key': 'd91e4b1ec9df35e2b40ace238ef44e7d733fb6e9'}
INFO:__main__:✅ Using optimized risk score for entity 218432707: 42
INFO:__main__:✅ Using optimized PEP status for entity 218432707: NOT_PEP
INFO:__main__:Entity 213518424: events_raw=1, bvd_mapping=None
INFO:__main__:Entity 213518424: First event sample: {'event_category_code': 'BRB', 'event_sub_category_code': 'CHG', 'event_date': '2024-09-06', 'event_description': 'Donald Trump\'s hush money trial on Friday delayed sentencing until after November\'s US presidential election to "avoid any appearance" of impacting the vote. The Republican White House candidate had been scheduled to be sentenced on September 18 for falsifying business records as part of a scheme to silence a porn star who alleged they had a sexual encounter.', 'event_description_short': 'Donald Trump\'s hush money trial on Friday delayed sentencing until after November\'s US presidential election to "avoid any appearance" of impacting the vote. The Republican White House candidate had b', 'created_date': '09/06/2024', 'modified_date': '09/07/2024', 'publish_date': '09/06/2024', 'source_name': 'Acquire Media Web Article - 4cb02f7386baef966df30eaec9e12294e0f025d4', 'source_type': 'Media', 'source_publication': 'Messenger, The (Madisonville, KY)', 'source_publisher': 'Messenger, The (Madisonville, KY)', 'source_key': '4cb02f7386baef966df30eaec9e12294e0f025d4'}
INFO:__main__:✅ Using optimized risk score for entity 213518424: 42
INFO:__main__:✅ Using optimized PEP status for entity 213518424: NOT_PEP
INFO:__main__:Entity 210688070: events_raw=1, bvd_mapping=None
INFO:__main__:Entity 210688070: First event sample: {'event_category_code': 'BRB', 'event_sub_category_code': 'CVT', 'event_date': '2024-07-25', 'event_description': 'A jury found Trump guilty of illegally covering up payments to his former attorney Michael Cohen, who paid off adult film star Stormy Daniels to prevent her from publicly sharing her story about having sex with Trump in 2006. Trump was convicted on 34 felony counts of falsifying business records.', 'event_description_short': 'A jury found Trump guilty of illegally covering up payments to his former attorney Michael Cohen, who paid off adult film star Stormy Daniels to prevent her from publicly sharing her story about havin', 'created_date': '07/25/2024', 'modified_date': '07/27/2024', 'publish_date': '07/25/2024', 'source_name': 'Acquire Media Article - 867c5b9c15cc054e1f226ea693b6001452926641', 'source_type': 'Media', 'source_publication': 'Independent, The (UK) (Online)', 'source_publisher': 'Independent Digital News and Media', 'source_key': '867c5b9c15cc054e1f226ea693b6001452926641'}
INFO:__main__:✅ Using optimized risk score for entity 210688070: 42
INFO:__main__:✅ Using optimized PEP status for entity 210688070: NOT_PEP
INFO:__main__:Entity 205812631: events_raw=1, bvd_mapping=None
INFO:__main__:Entity 205812631: First event sample: {'event_category_code': 'BRB', 'event_sub_category_code': 'TRL', 'event_date': '2024-05-15', 'event_description': 'Donald Trump\'s hush money trial, his former "fixer" Michael Cohen repeated one phrase when talking about the payments made to adult film star Stormy Daniels.', 'event_description_short': 'Donald Trump\'s hush money trial, his former "fixer" Michael Cohen repeated one phrase when talking about the payments made to adult film star Stormy Daniels.', 'created_date': '05/15/2024', 'modified_date': '05/16/2024', 'publish_date': '05/15/2024', 'source_name': 'Acquire Media Article - d784b087935b044fcf321b6d17f028bf8d8cd898', 'source_type': 'Media', 'source_publication': 'Independent, The (UK) (Online)', 'source_publisher': 'Independent Digital News and Media', 'source_key': 'd784b087935b044fcf321b6d17f028bf8d8cd898'}
INFO:__main__:✅ Using optimized risk score for entity 205812631: 42
INFO:__main__:✅ Using optimized PEP status for entity 205812631: NOT_PEP
INFO:__main__:Stored 5 results for client af4c10ab135d
INFO:__main__:JSON parsing completed for 5 entities
INFO:__main__:Notifying 4 callbacks of search update
INFO:__main__:Entity Browser received search update notification
INFO:__main__:Loaded 5 entities from app_instance.current_results
INFO:__main__:AI Analysis received search update notification
INFO:__main__:AI Analysis: Updated to 5 search results
INFO:__main__:SQL Analysis received search update notification
INFO:__main__:SQL Analysis: Updated to 5 search results
INFO:__main__:Network Analysis received search update notification
INFO:__main__:Network Analysis: Updated to 5 search results
INFO:__main__:About to display 5 results in UI
INFO:__main__:Displaying 5 entities for client 40c1c28ef9ec
INFO:__main__:Loading hybrid display for 5 entities
INFO:__main__:Creating SQL analysis for 5 results
INFO:optimized_database_queries:🔍 Searching individual tables with prefix: individual
INFO:optimized_database_queries:🔍 Name search for: 'Donald Trump' (length: 12)
INFO:optimized_database_queries:✅ Added individual name filters for: 'Donald Trump'
INFO:optimized_database_queries:🔍 Query filters count: base=1, performance=0, total=1
INFO:optimized_database_queries:🔍 Query parameters: ['name_exact', 'name_contains', 'name_starts_with', 'name_ends_with']
INFO:optimized_database_queries:🔧 Using config-based events - Critical: 8, High: 10, Medium: 10, Low: 8
INFO:optimized_database_queries:📋 Query built with 1 filters, limit: 500
INFO:__main__:Parsed results sample: {'entity_id': '224452122', 'risk_id': 'R165732288', 'entity_name': 'Donald Trump', 'entity_type': 'INDIVIDUAL', 'system_id': 'bbf5df34991ed719d52c32714daf91cb', 'entity_date': datetime.date(2025, 1, 6), 'risk_score': 42, 'risk_level': 'Low', 'risk_severity': 'Investigative', 'calculated_risk_score': 100, 'final_risk_score': 42, 'risk_factors': {'event_risk': 80, 'pep_risk': 0, 'geographic_risk': 20, 'temporal_risk': 0}, 'is_pep': False, 'pep_status': 'NOT_PEP', 'pep_codes': [], 'pep_levels': [], 'pep_descriptions': [], 'pep_type': None, 'pep_level': None, 'highest_pep_level': None, 'pep_associations': [], 'prt_ratings': [], 'events': [{'event_category_code': 'BRB', 'event_sub_category_code': 'CVT', 'event_date': '2025-01-06', 'event_description': "Donald Trump is trying to get out of his sentencing hearing for the 34 felony counts in his hush-money case. Trump's lawyers argued that the Supreme Court's decision in Trump v. United States required a stay of all trial proceedings, as Trump had been granted presidential immunity for official acts.", 'event_description_short': "Donald Trump is trying to get out of his sentencing hearing for the 34 felony counts in his hush-money case. Trump's lawyers argued that the Supreme Court's decision in Trump v. United States required", 'created_date': '01/07/2025', 'modified_date': '01/27/2025', 'publish_date': '01/06/2025', 'source_name': 'NewsBank Article - 19DF5171F6F2BDF0', 'source_type': 'Media', 'source_publication': 'New Republic, The: Web Edition Articles', 'source_publisher': 'New Republic, The: Web Edition Articles', 'source_key': '19DF5171F6F2BDF0'}], 'event_count': 1, 'event_codes': ['BRB'], 'critical_events_count': 1, 'critical_events': [{'event_category_code': 'BRB', 'event_sub_category_code': 'CVT', 'event_date': '2025-01-06', 'event_description': "Donald Trump is trying to get out of his sentencing hearing for the 34 felony counts in his hush-money case. Trump's lawyers argued that the Supreme Court's decision in Trump v. United States required a stay of all trial proceedings, as Trump had been granted presidential immunity for official acts.", 'event_description_short': "Donald Trump is trying to get out of his sentencing hearing for the 34 felony counts in his hush-money case. Trump's lawyers argued that the Supreme Court's decision in Trump v. United States required", 'created_date': '01/07/2025', 'modified_date': '01/27/2025', 'publish_date': '01/06/2025', 'source_name': 'NewsBank Article - 19DF5171F6F2BDF0', 'source_type': 'Media', 'source_publication': 'New Republic, The: Web Edition Articles', 'source_publisher': 'New Republic, The: Web Edition Articles', 'source_key': '19DF5171F6F2BDF0'}], 'latest_event_date': '2025-01-06', 'primary_country': 'UNITED STATES', 'primary_city': None, 'country': 'UNITED STATES', 'addresses': [{'address_country': 'UNITED STATES'}], 'aliases': [], 'key_aliases': [], 'alias_count': 0, 'identifications': [], 'relationships': [], 'sources': [], 'date_of_birth': {}, 'source_count': 0, 'relationship_count': 0, 'bvd_id': '', 'source_item_id': '', 'created_date': datetime.date(2025, 1, 6), 'attributes': [], 'date_of_births': [], 'bvd_mapping': [], 'reverse_relationships': []}
INFO:__main__:Displaying entity results as cards
INFO:__main__:Processing 5 results for card display
INFO:__main__:Card view: Displaying 5 entities (showing up to 50)
INFO:__main__:Successfully created 5 entity cards
INFO:hybrid_entity_display:✅ Hybrid entity display created with 5 entities
INFO:__main__:✅ Hybrid entity display created successfully
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Created new user session ID: d7120e1d1333c54c
INFO:__main__:✅ Optimized DatabaseQueries initialized
INFO:__main__:Loaded 1 risk scores from dynamic configuration
INFO:__main__:Loaded 1 PEP priorities from dynamic configuration
INFO:__main__:Loaded 2 geographic multipliers from dynamic configuration
INFO:__main__:Settings file not found, using defaults
INFO:__main__:Applying environment variable overrides...
INFO:__main__:Environment variable overrides applied
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.client:Successfully opened session 01f087f9-cdeb-14e5-852f-c29fd4abdaee
INFO:__main__:Database connection successful (timeout: 30s)
INFO:__main__:✅ Optimized database queries ready for use
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:__main__:✅ Loaded 182 codes from database:
INFO:__main__:   - entity_attribute: 29 codes
INFO:__main__:   - event_category: 67 codes
INFO:__main__:   - event_sub_category: 36 codes
INFO:__main__:   - relationship_direction: 2 codes
INFO:__main__:   - relationship_type: 48 codes
INFO:__main__:   Risk codes: 68 → 68 (+0 from DB)
INFO:__main__:   PEP codes: 19 → 19 (+0 from DB)
INFO:__main__:   Added 1 missing risk codes from debug analysis
INFO:__main__:🔄 Merged database codes with existing dictionaries
INFO:__main__:✅ Database integration initialized successfully
INFO:__main__:Created new app instance for user d7120e1d1333c54c
INFO:__main__:Main page accessed by user d7120e1d1333c54c
INFO:__main__:Created Entity Browser for client 69db88234816
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Displaying 0 entities for client 69db88234816
INFO:__main__:Browser 69db88234816 showing empty state (available data: 0)
INFO:__main__:Session cleanup completed
INFO:__main__:Cleaned up expired user instance: 8e2c33623bbf71f8
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Cleaned up expired user instance: d7120e1d1333c54c
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
INFO:__main__:Session cleanup completed
^Z
zsh: suspended  python3 main.py
(venv) mukhiyas@Y2GM2Y75K7 gr5-master % lsof -i :8080  
COMMAND     PID     USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
Python    59975 mukhiyas   37u  IPv4  0x3b82512aa0b4a26      0t0  TCP *:http-alt (LISTEN)
Python    59975 mukhiyas   39u  IPv4 0xa7fb6e18899acc78      0t0  TCP localhost:http-alt->localhost:53151 (ESTABLISHED)
Google    88819 mukhiyas   26u  IPv4 0x2a3d702fc4cc3a15      0t0  TCP localhost:53151->localhost:http-alt (ESTABLISHED)
(venv) mukhiyas@Y2GM2Y75K7 gr5-master % kill -9 59975  
[1]  + killed     python3 main.py                                                                                                             
(venv) mukhiyas@Y2GM2Y75K7 gr5-master % python3 main.py
/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
INFO:optimized_database_queries:✅ Loaded 36 event risk scores from configuration
INFO:optimized_database_queries:✅ Loaded PEP level scores from configuration: {'L1': 55, 'L2': 60, 'L3': 65, 'L4': 70, 'L5': 75, 'L6': 80}
INFO:optimized_database_queries:✅ Loaded PRT rating scores: {'A': 90, 'B': 75, 'C': 60, 'D': 45}
INFO:optimized_database_queries:✅ Loaded 14 priority countries from configuration
INFO:__main__:✅ Optimized database query modules loaded successfully
INFO:__main__:✅ Legacy database integration modules loaded successfully
INFO:__main__:Background cleanup thread started successfully
============================================================
🚀 GRID ENTITY SEARCH - PRODUCTION MODE
============================================================
✅ Full Database Connectivity
✅ Real Entity Search & Analysis
✅ Complete Enterprise Functionality
✅ User Session Isolation (Fixed Caching Issues)
🌐 Access: http://localhost:8080
============================================================
NiceGUI ready to go on http://localhost:8080, http://10.27.173.44:8080, and http://192.168.1.127:8080
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.client:Successfully opened session 01f08818-c683-1e07-883a-675691cfbb2f
INFO:database_driven_codes:✅ Connected to database for live code extraction
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:database_driven_codes:📋 Loaded 67 event category codes from database
INFO:__main__:✅ Optimized DatabaseQueries initialized
INFO:dynamic_config_manager:✅ Loaded configuration from user_config.json
INFO:__main__:Loaded 1 risk scores from dynamic configuration
INFO:__main__:Loaded 1 PEP priorities from dynamic configuration
INFO:__main__:Loaded 2 geographic multipliers from dynamic configuration
INFO:__main__:Settings file not found, using defaults
INFO:__main__:Applying environment variable overrides...
INFO:__main__:Environment variable overrides applied
INFO:__main__:✅ Database integration initialized successfully
INFO:__main__:Created new app instance for user 8e2c33623bbf71f8
INFO:__main__:Main page accessed by user 8e2c33623bbf71f8
INFO:__main__:Created Entity Browser for client f4f1cbfebe12
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Registered search update callback: on_search_update
INFO:__main__:Connecting to Databricks asynchronously...
INFO:__main__:Displaying 0 entities for client f4f1cbfebe12
INFO:__main__:Browser f4f1cbfebe12 showing empty state (available data: 0)
ERROR:nicegui:'NoneType' object has no attribute 'event_codes'
Traceback (most recent call last):
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/background_tasks.py", line 52, in _handle_task_result
    task.result()
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/page.py", line 116, in wait_for_result
    return await result
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 8019, in main_page
    await create_configuration_interface()
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 12459, in create_configuration_interface
    "description": f"All event codes from database with live definitions ({len(database_driven_codes.event_codes)} codes)",
AttributeError: 'NoneType' object has no attribute 'event_codes'
ERROR:nicegui:'NoneType' object has no attribute 'event_codes'
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/sessions.py", line 83, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/storage.py", line 86, in dispatch
    |     response = await call_next(request)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/middlewares.py", line 10, in dispatch
    |     response = await call_next(request)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/gzip.py", line 24, in __call__
    |     await responder(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/gzip.py", line 44, in __call__
    |     await self.app(scope, receive, self.send_with_gzip)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 758, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 778, in app
    |     await route.handle(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 299, in handle
    |     await self.app(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 79, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 74, in app
    |     response = await func(request)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 299, in app
    |     raise e
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 294, in app
    |     raw_response = await run_endpoint_function(
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/page.py", line 124, in decorated
    |     result = task.result()
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/background_tasks.py", line 52, in _handle_task_result
    |     task.result()
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/page.py", line 116, in wait_for_result
    |     return await result
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 8019, in main_page
    |     await create_configuration_interface()
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 12459, in create_configuration_interface
    |     "description": f"All event codes from database with live definitions ({len(database_driven_codes.event_codes)} codes)",
    | AttributeError: 'NoneType' object has no attribute 'event_codes'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/storage.py", line 86, in dispatch
    response = await call_next(request)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/middlewares.py", line 10, in dispatch
    response = await call_next(request)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/gzip.py", line 24, in __call__
    await responder(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/page.py", line 124, in decorated
    result = task.result()
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/background_tasks.py", line 52, in _handle_task_result
    task.result()
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/page.py", line 116, in wait_for_result
    return await result
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 8019, in main_page
    await create_configuration_interface()
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 12459, in create_configuration_interface
    "description": f"All event codes from database with live definitions ({len(database_driven_codes.event_codes)} codes)",
AttributeError: 'NoneType' object has no attribute 'event_codes'
ERROR:    Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    |     return await self.app(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/sessions.py", line 83, in __call__
    |     await self.app(scope, receive, send_wrapper)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/storage.py", line 86, in dispatch
    |     response = await call_next(request)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/middlewares.py", line 10, in dispatch
    |     response = await call_next(request)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/gzip.py", line 24, in __call__
    |     await responder(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/gzip.py", line 44, in __call__
    |     await self.app(scope, receive, self.send_with_gzip)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 758, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 778, in app
    |     await route.handle(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 299, in handle
    |     await self.app(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 79, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 74, in app
    |     response = await func(request)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 299, in app
    |     raise e
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 294, in app
    |     raw_response = await run_endpoint_function(
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    |     return await dependant.call(**values)
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/page.py", line 124, in decorated
    |     result = task.result()
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/background_tasks.py", line 52, in _handle_task_result
    |     task.result()
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/page.py", line 116, in wait_for_result
    |     return await result
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 8019, in main_page
    |     await create_configuration_interface()
    |   File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 12459, in create_configuration_interface
    |     "description": f"All event codes from database with live definitions ({len(database_driven_codes.event_codes)} codes)",
    | AttributeError: 'NoneType' object has no attribute 'event_codes'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/sessions.py", line 83, in __call__
    await self.app(scope, receive, send_wrapper)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/storage.py", line 86, in dispatch
    response = await call_next(request)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/middlewares.py", line 10, in dispatch
    response = await call_next(request)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/gzip.py", line 24, in __call__
    await responder(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/starlette/routing.py", line 74, in app
    response = await func(request)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 299, in app
    raise e
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/page.py", line 124, in decorated
    result = task.result()
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/background_tasks.py", line 52, in _handle_task_result
    task.result()
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/venv/lib/python3.9/site-packages/nicegui/page.py", line 116, in wait_for_result
    return await result
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 8019, in main_page
    await create_configuration_interface()
  File "/Users/mukhiyas/Library/CloudStorage/OneDrive-moodys.com/Desktop/gr5-master/main.py", line 12459, in create_configuration_interface
    "description": f"All event codes from database with live definitions ({len(database_driven_codes.event_codes)} codes)",
AttributeError: 'NoneType' object has no attribute 'event_codes'
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:databricks.sql.client:Successfully opened session 01f08818-c901-155d-a01d-995878a11004
INFO:__main__:Database connection successful (timeout: 30s)
INFO:__main__:✅ Optimized database queries ready for use
INFO:__main__:✅ Legacy integration modules connection updated
INFO:__main__:Loading code dictionaries asynchronously...
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:__main__:✅ Loaded 182 codes from database:
INFO:__main__:   - entity_attribute: 29 codes
INFO:__main__:   - event_category: 67 codes
INFO:__main__:   - event_sub_category: 36 codes
INFO:__main__:   - relationship_direction: 2 codes
INFO:__main__:   - relationship_type: 48 codes
INFO:__main__:   Risk codes: 68 → 68 (+0 from DB)
INFO:__main__:   PEP codes: 19 → 19 (+0 from DB)
INFO:__main__:   Added 1 missing risk codes from debug analysis
INFO:__main__:🔄 Merged database codes with existing dictionaries
INFO:__main__:Code dictionaries loaded asynchronously
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:database_driven_codes:📊 Loaded usage statistics for 63 codes
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:database_driven_codes:📋 Loaded 36 event sub-category codes
INFO:databricks.sql.auth.retry:Received status code 200 for POST request
INFO:databricks.sql.auth.thrift_http_client:HTTP Response with status code 200, message: OK
INFO:database_driven_codes:📋 Loaded 29 entity attribute codes
INFO:database_driven_codes:✅ Successfully loaded all codes from database
INFO:database_driven_codes:📝 No user customizations found - using database defaults
INFO:__main__:✅ Database modules initialized successfully
INFO:__main__:✅ Database modules initialized in background
